<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CreateBusTimes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #fafafa;
}

header {
    background: #f3f0c8;
    padding: 12px 16px;
    border-bottom: 1px solid #ddd;
    font-size: 20px;
    font-weight: bold;
}

main {
    padding: 16px;
}

h1 {
    margin: 0;
    font-size: 28px;
}

.sub {
    color: #666;
    margin-top: 6px;
}

.tabs {
    margin-top: 20px;
    border-bottom: 1px solid #ccc;
}

.tabs button {
    border: none;
    background: none;
    padding: 10px 16px;
    font-size: 15px;
    cursor: pointer;
}

.tabs button.active {
    border-bottom: 3px solid #6699cc;
    font-weight: bold;
}

.list {
    margin-top: 16px;
}

.item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
}

.badge {
    border: 2px solid #ccc;
    min-width: 55px;
    text-align: center;
    padding: 6px;
    margin-right: 12px;
    background: #fff;
}

.badge strong {
    font-size: 18px;
    display: block;
}

.badge small {
    font-size: 12px;
}

.box {
    background: #fff;
    padding: 12px;
    margin-top: 20px;
    border-radius: 6px;
}

input, button {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
    font-size: 14px;
}

button {
    background: #6699cc;
    color: #fff;
    border: none;
    cursor: pointer;
}

.hidden {
    display: none;
}
</style>
</head>

<body>

<header>CreateBusTimes</header>

<main>
    <h1>Your Bus Company</h1>
    <div class="sub">A fictional bus company created by you</div>

    <div class="tabs">
        <button class="active" onclick="showTab('services')">Services</button>
        <button onclick="showTab('fleet')">Fleet</button>
        <button onclick="showTab('addService')">Add Service</button>
        <button onclick="showTab('addVehicle')">Add Vehicle</button>
    </div>

    <!-- SERVICES -->
    <div id="services" class="list"></div>

    <!-- FLEET -->
    <div id="fleet" class="list hidden"></div>

    <!-- ADD SERVICE -->
    <div id="addService" class="box hidden">
        <h3>Add Service</h3>
        <input id="svcCode" placeholder="Service code (e.g. A1)">
        <input id="svcName" placeholder="Service name">
        <input id="svcDesc" placeholder="Service description">
        <button onclick="addService()">Add Service</button>
    </div>

    <!-- ADD VEHICLE -->
    <div id="addVehicle" class="box hidden">
        <h3>Add Vehicle</h3>
        <input id="vehFleet" placeholder="Fleet number">
        <input id="vehType" placeholder="Vehicle type">
        <input id="vehReg" placeholder="Registration (fictional)">
        <button onclick="addVehicle()">Add Vehicle</button>
    </div>
</main>

<script>
let services = JSON.parse(localStorage.getItem("cbtServices")) || [];
let vehicles = JSON.parse(localStorage.getItem("cbtVehicles")) || [];

function save() {
    localStorage.setItem("cbtServices", JSON.stringify(services));
    localStorage.setItem("cbtVehicles", JSON.stringify(vehicles));
}

function showTab(tab) {
    document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
    event.target.classList.add("active");

    ["services","fleet","addService","addVehicle"].forEach(id => {
        document.getElementById(id).classList.add("hidden");
    });

    document.getElementById(tab).classList.remove("hidden");
}

function addService() {
    if (!svcCode.value) return alert("Enter a service code");
    services.push({
        code: svcCode.value,
        name: svcName.value,
        desc: svcDesc.value
    });
    save();
    render();
    svcCode.value = svcName.value = svcDesc.value = "";
}

function addVehicle() {
    if (!vehFleet.value) return alert("Enter fleet number");
    vehicles.push({
        fleet: vehFleet.value,
        type: vehType.value,
        reg: vehReg.value
    });
    save();
    render();
    vehFleet.value = vehType.value = vehReg.value = "";
}

function render() {
    servicesDiv.innerHTML = "";
    fleetDiv.innerHTML = "";

    services.forEach(s => {
        servicesDiv.innerHTML += `
        <div class="item">
            <div class="badge">
                <strong>${s.code}</strong>
                <small>${s.name}</small>
            </div>
            ${s.desc}
        </div>`;
    });

    vehicles.forEach(v => {
        fleetDiv.innerHTML += `
        <div class="item">
            <div class="badge">
                <strong>${v.fleet}</strong>
            </div>
            ${v.type} â€“ ${v.reg}
        </div>`;
    });
}

const servicesDiv = document.getElementById("services");
const fleetDiv = document.getElementById("fleet");

render();
</script>

</body>
</html>
